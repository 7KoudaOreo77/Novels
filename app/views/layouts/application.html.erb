<!DOCTYPE html>
<html>
  <head>
    <title>Novel</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
   <header class="sticky-top">
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
     <%= link_to 'Bookers', root_path, class:"navbar-brand" %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
       <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
       <ul class="navbar-nav ml-auto">




        <% if user_signed_in? %>
 
           <%= form_with url: search_public_novels_path, local: true, method: :get do |form| %>
            <%= form.text_field :keyword %>
            <%= form.submit "検索" %>

        <% end %>

         <li>
          <%= link_to public_user_path(current_user.id), class:"nav-link text-light" do %>
            <i class="fas fa-home"></i> マイページ
          <% end %>
         </li>
         <li>
          <%= link_to new_public_novel_path, class:"nav-link text-light" do %>
           <i class="fas fa-book-open"></i> 新規投稿
          <% end %>
         </li>
         <li>
          <%= link_to public_users_path, class:"nav-link text-light" do %>
           <i class="fas fa-users"></i> ユーザー
          <% end %>
         </li>
         <li>
          <%= link_to public_novels_path, class:"nav-link text-light" do %>
           <i class="fas fa-book-open"></i> 投稿一覧
          <% end %>
         </li>
         <li>
          <%= link_to destroy_user_session_path, class:"nav-link text-light", method: :delete do %>
           <i class="fas fa-sign-out-alt"></i> ログアウト
          <% end %>
         </li>

        <% elsif admin_signed_in? %>
         <li>
          <%= link_to admin_users_path, class:"nav-link text-light" do %>
           <i class="fas fa-users"></i> ユーザー一覧
          <% end %>
         </li>
         <li>
          <%= link_to admin_novel_comments_path, class:"nav-link text-light" do %>
           <i class="fas fa-book-open"></i> コメント一覧
          <% end %>
         </li>
         <li>
          <%= link_to destroy_user_session_path, class:"nav-link text-light", method: :delete do %>
           <i class="fas fa-sign-out-alt"></i> ログアウト
          <% end %>
         </li>
        <% else %>
         <li>
          <%= link_to  root_path, class:"nav-link text-light" do %>
           <i class="fas fa-home"></i> Home
          <% end %>
         </li>
         <li>
          <%=link_to about_path, class:"nav-link text-light" do %>
           <i class="fas fa-link"></i> About
          <% end %>
         </li>
         <li>
          <%= link_to new_user_registration_path, class:"nav-link text-light" do %>
           <i class="fas fa-user-plus"></i> 新規登録
          <% end %>
         </li>
         <li>
          <%= link_to users_guest_sign_in_path, method: :post, class:"nav-link text-light" do %>
           <i class="fas fa-sign-in-alt"></i> ゲストログイン(閲覧用)
          <% end %>
         </li>
         <li>
          <%= link_to new_user_session_path, class:"nav-link text-light" do %>
           <i class="fas fa-sign-in-alt"></i> ログイン
          <% end %>
         </li>
         <% end %>
        </ul>
       </div>

     </nav>
    </header>
    <p id="notice">
     <%= flash[:hoge]  %>
    </p>

    <main><%= yield %></main>

    <footer>
     <div class="container mt-5">
      <div class="row">
       <div class="mx-auto">
        <p>CopyRight Infratop.inc</p>
       </div>
      </div>
     </div>
    </footer>


  </body>
</html>


